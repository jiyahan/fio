<html><head>
        <META http-equiv="content-type" content="text/html; charset=utf-8">
        <title>fio</title>
        </head><body>
        <h1>fio</h1>
        <!-- Generated by Ddoc from source/fio/fio.d -->
<br><br>
<dl><dt><big><a name="Daemon"></a>class <u>Daemon</u>(F, A...);
</big></dt>
<dd>Excecution unit that run in "background" - you can't wait for its completion
<br><br>

<dl><dt><big><a name="Daemon.this"></a>pure @safe this(F <i>f</i>, A <i>a</i>);
</big></dt>
<dd>Constructor
<br><br>
<b>Params:</b><br>
<table><tr><td>F <i>f</i></td>
<td>function or generator</td></tr>
<tr><td>A <i>a</i></td>
<td>args to call <i>f</i></td></tr>
</table><br>

</dd>
<dt><big><a name="Daemon.start"></a>auto <u>start</u>();
</big></dt>
<dd>You have to call <u>start</u>() method to <u>start</u> daemon running
<br><br>
<b>Params:</b><br>
<table></table><br>
<b>Return:</b><br>
Daemon object (you can chain calls)<br><br>

</dd>
</dl>
</dd>
<dt><big><a name="stacksize"></a>@property int <u>stacksize</u>();
</big></dt>
<dd>Get stack size for new fibers
<br><br>

</dd>
<dt><big><a name="stacksize.2"></a>@property void <u>stacksize</u>(int <i>s</i>);
</big></dt>
<dd>Set stack size for new fibers
<br><br>

</dd>
<dt><big><a name="Future"></a>class <u>Future</u>(F, A...);
</big></dt>
<dd>Execution unit that run in "foreground" - you can wait for completion and get results
<br><br>

<dl><dt><big><a name="Future.this"></a>pure nothrow @nogc @safe this(F <i>f</i>, A <i>a</i>);
</big></dt>
<dd>Constructor
<br><br>
<b>Params:</b><br>
<table><tr><td>F <i>f</i></td>
<td>function or generator</td></tr>
<tr><td>A <i>a</i></td>
<td>args to call <i>f</i></td></tr>
</table><br>

</dd>
<dt><big><a name="Future.start"></a>@safe auto <u>start</u>();
</big></dt>
<dd>You have to call <u>start</u>() to <u>start</u> Future execution
<br><br>

</dd>
<dt><big><a name="Future.get"></a>@property @safe auto <u>get</u>();
</big></dt>
<dd>Get return value of f when f completes.
<br><br>

</dd>
<dt><big><a name="Future.ready"></a>@property @safe bool <u>ready</u>();
</big></dt>
<dd>Get completion status and result readiness
<br><br>
<b>Return:</b><br>
True if task were started and were finished<br><br>

</dd>
<dt><big><a name="Future.wait"></a>int <u>wait</u>(Duration <i>d</i> = 0.seconds);
</big></dt>
<dd>Wait for task completion. Also start task if you forget to call method start()
<br><br>
<b>Params:</b><br>
<table><tr><td>Duration <i>d</i></td>
<td>how long to <u>wait</u> (forewer by default)</td></tr>
</table><br>
<b>Return:</b><br>
status of <u>wait</u> (SUCCESS or TIMEDOUT)<br><br>

</dd>
<dt><big><a name="Future.waitAndGet"></a>@property auto <u>waitAndGet</u>(Duration <i>d</i> = 0.seconds);
</big></dt>
<dd>Wait for task completion and return result. Also start task if you forget to call method start()
<br><br>
<b>Params:</b><br>
<table><tr><td>Duration <i>d</i></td>
<td>how long to wait (forewer by default)</td></tr>
</table><br>
<b>Return:</b><br>
result of f, or exceptioin ResultNotReady if result is not ready after timeout <i>d</i> expired.<br><br>

</dd>
</dl>
</dd>
<dt><big><a name="makeFuture"></a>pure nothrow @safe auto <u>makeFuture</u>(F, A...)(F <i>f</i>, A <i>a</i>);
</big></dt>
<dd><u>makeFuture</u> create "Future" - execution unit that you
<br><br>
can start, wait for completion and get result

<br><br>
<b>Params:</b><br>
<table><tr><td>F f</td>
<td>function or delegate to run</td></tr>
<tr><td>A a</td>
<td>args for calling f</td></tr>
</table><br>
<b>Examples:</b><br>
<pre class="d_code">
globalLogLevel(LogLevel.info);
info(<font color=red>"Test Future"</font>);
<font color=blue>new</font> fioTask((){
    <font color=blue>int</font> base = 1;
    <font color=blue>void</font> f0() {
    }
    <font color=blue>int</font> f1(<font color=blue>int</font> a) {
        <font color=blue>return</font> a;
    }
    <font color=blue>int</font> f2(<font color=blue>int</font> a, <font color=blue>int</font> b) {
        infof(<font color=red>"f2 sleep, wait %d seconds, please."</font>, a);
        fioSleep(dur!<font color=red>"seconds"</font>(a));
        <font color=blue>return</font> b+base;
    }
    <font color=blue>auto</font> t0 = <u>makeFuture</u>(&amp;f0).start();
    <font color=blue>auto</font> t1 = <u>makeFuture</u>(&amp;f1, 1).start();
    <font color=blue>auto</font> t2 = <u>makeFuture</u>(&amp;f2, 5, 1).start();
    <font color=blue>auto</font> t3 = <u>makeFuture</u>((string s) {
            <font color=blue>assert</font>(s == <font color=red>"hello"</font>);
        }, <font color=red>"hello"</font>).start();
    <font color=blue>auto</font> t = tuple(t0, t1, t2, t3);
    <font color=blue>assert</font>(t.waitAll(1.seconds) == [0,0,TIMEOUT,0]);
    info(<font color=red>"Future waitAll - ok"</font>);
    <font color=blue>auto</font> tasks = map!(a =&gt; <u>makeFuture</u>(&amp;f1, a).start)([1, 2, 3]).array();
    tasks ~= <u>makeFuture</u>(&amp;f1, 4).start;
    <font color=green>//fioSleep(1.seconds);
</font>    <font color=blue>assert</font>(tasks.map!(a =&gt; a.waitAndGet).array() == [1,2,3,4]);
    info(<font color=red>"Future waitAndGet - ok"</font>);
    <font color=blue>auto</font> d = makeDaemon(
            (<font color=blue>int</font> a) {
                infof(<font color=red>"Daemon got %d and return"</font>, a);
            }, 1
        ).start();
    stopEventLoop();
});
runEventLoop();
info(<font color=red>"Test Future! Done"</font>);
</pre>
<br><br>
</dd>
<dt><big><a name="makeDaemon"></a>pure nothrow @safe auto <u>makeDaemon</u>(F, A...)(F <i>f</i>, A <i>a</i>);
</big></dt>
<dd><u>makeDaemon</u> create "Daemon" - execution unit that you
<br><br>
can start but can't wait for completion or get result.
<br><br>

All you can do with daemons - wait when all daemons finish with call
<br><br>

waitForAllDaemons()

<br><br>
<b>Params:</b><br>
<table><tr><td>F f</td>
<td>function or delegate to run</td></tr>
<tr><td>A a</td>
<td>args for calling f</td></tr>
</table><br>

</dd>
<dt><big><a name="makeApp"></a>auto <u>makeApp</u>(F, A...)(F <i>f</i>, A <i>a</i>);
</big></dt>
<dd><u>makeApp</u> create "Future" that
 will stop eventLoop when completed
<br><br>
<b>Params:</b><br>
<table><tr><td>F f</td>
<td>function or delegate to run</td></tr>
<tr><td>A a</td>
<td>args for calling f</td></tr>
</table><br>
<b>Return:</b><br>
Nothing<br><br>
<b>Examples:</b><br>
<pre class="d_code">
globalLogLevel(LogLevel.info);
info(<font color=red>"Test makeApp"</font>);
<u>makeApp</u>((){
    <font color=blue>void</font> f0() {
        <font color=blue>auto</font> aa = [1:1];
    }
    <font color=blue>auto</font> t0 = makeFuture(&amp;f0).start();
    t0.wait();
});
runEventLoop();
info(<font color=red>"App finished"</font>);
</pre>
<br><br>
</dd>
<dt><big><a name="waitForAllDaemons"></a>int <u>waitForAllDaemons</u>(Duration <i>timeout</i> = 0.seconds);
</big></dt>
<dd>wait(polling used) until all started daemon tasks finish
<br><br>
<b>Params:</b><br>
<table><tr><td>Duration <i>timeout</i></td>
<td>,how long to wait</td></tr>
</table><br>
<b>Return:</b><br>
TIMEOUT or 0<br><br>

</dd>
<dt><big><a name="waitAll"></a>int[] <u>waitAll</u>(W)(W <i>tasks</i>, Duration <i>d</i> = 0.seconds);
</big></dt>
<dd>Wait until all tasks in array finish
<br><br>
<b>Params:</b><br>
<table><tr><td>W tasks</td>
<td>range of objects, supporting wait()</td></tr>
<tr><td>Duration d</td>
<td>time to wait</td></tr>
</table><br>
<b>Return:</b><br>
array of the 0(success) and TIMEOUT(failed to wait)<br><br>

</dd>
<dt><big><a name="fioSleep"></a>void <u>fioSleep</u>(in Duration <i>d</i>);
</big></dt>
<dd>sleep for some duration.
<br><br>
you have to use this sleep as it allow concurrency

<br><br>
<b>Params:</b><br>
<table><tr><td>Duration <i>d</i></td>
<td>duration</td></tr>
</table><br>
<b>Return:</b><br>
void

<br><br>
<b>Examples:</b><br>
<pre style="display:inline;" class="d_inline_code"><u>fioSleep</u>(1.seconds)</pre><br><br>

</dd>
<dt><big><a name="makeTCPListener"></a>auto <u>makeTCPListener</u>(F)(string <i>host</i>, ushort <i>port</i>, F <i>f</i>);
</big></dt>
<dd>Create TCPListener
<br><br>
<b>Params:</b><br>
<table><tr><td>string host</td>
<td>interface to listen</td></tr>
<tr><td>ushort port</td>
<td>port to listen</td></tr>
<tr><td>F f</td>
<td>function or delegate to execute on each connectiom</td></tr>
</table><br>
<b>Return:</b><br>
instance of class fioTCPListener<br><br>

</dd>
</dl>

        <hr><small>Page generated by <a href="http://dlang.org/ddoc.html">Ddoc</a>. </small>
        </body></html>
